services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: django_app
    volumes:
      # Volumen con nombre para persistencia garantizada de archivos media
      - media_volume:/app/media
      # Monta la base de datos para persistencia
      - ./proyecto_django/db.sqlite3:/app/proyecto_django/db.sqlite3
    environment:
      # Configuraci√≥n para Django
      DJANGO_SETTINGS_MODULE: proyecto_django.settings.local
      DEBUG: "False"
    restart: unless-stopped
    command:
      [
        "uv",
        "run",
        "python",
        "proyecto_django/manage.py",
        "runserver",
        "0.0.0.0:8000",
      ]
volumes:
  media_volume:
